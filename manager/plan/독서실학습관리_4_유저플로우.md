# 유저 플로우

## 전체 시스템 구조

```mermaid
graph TD
    Start([시작])
    
    Start --> Student[학생 웹]
    Start --> Parent[학부모 웹]
    Start --> Admin[관리자 웹사이트]
    
    Student --> S_Auth[회원가입/로그인]
    Student --> S_Dashboard[메인 대시보드]
    Student --> S_Goal[등원 목표 설정]
    Student --> S_Subject[과목 설정]
    Student --> S_Focus[몰입도 확인]
    Student --> S_Point[상벌점 내역]
    Student --> S_Chat[3자 채팅]
    
    Parent --> P_Auth[회원가입/로그인]
    Parent --> P_Status[학생 상태 확인]
    Parent --> P_Approve[스케줄 승인]
    Parent --> P_Chat[3자 채팅]
    
    Admin --> A_Auth[로그인]
    Admin --> A_Dashboard[학생 현황]
    Admin --> A_Focus[몰입도 관리]
    Admin --> A_Point[상벌점 관리]
    Admin --> A_Push[알림 관리]
    Admin --> A_User[회원 관리]
    Admin --> A_Data[데이터 다운로드]
    Admin --> A_Chat[채팅 관리]
```

## 학생 웹 상세 플로우

```mermaid
flowchart TD
    A([학생 진입])
    
    A --> B{로그인 상태?}
    
    B -->|아니오| C[로그인 화면]
    C --> D{계정 있음?}
    
    D -->|예| E[로그인 처리]
    D -->|아니오| F[회원가입 화면]
    
    F --> G[회원정보 입력]
    G --> H[회원가입 완료]
    H --> I[학부모 코드 생성]
    I --> E
    
    C --> J[카카오 로그인]
    J --> E
    
    B -->|예| K[메인 대시보드]
    E --> K
    
    K --> L[입실 상태 표시]
    K --> M[실시간 학습시간]
    K --> N[주간 목표/달성률]
    
    K --> O[등원 목표 설정]
    O --> P[시간 선택]
    P --> Q[목표 저장]
    
    K --> R[과목 설정]
    R --> S[과목 선택]
    S --> T[과목 저장]
    
    K --> U[몰입도 확인]
    U --> V[오늘 몰입도]
    U --> W[주간 리포트]
    
    K --> X[상벌점 내역]
    X --> Y[내역 목록]
    Y --> Z[총점 표시]
    
    K --> AA[채팅]
    AA --> AB[채팅방 목록]
    AB --> AC[채팅 화면]
    AC --> AD[메시지 전송]
```

## 학부모 웹 상세 플로우

```mermaid
flowchart TD
    A([학부모 진입])
    
    A --> B{로그인 상태?}
    
    B -->|아니오| C[로그인 화면]
    C --> D{계정 있음?}
    
    D -->|예| E[로그인 처리]
    D -->|아니오| F[회원가입 화면]
    
    F --> G[학생 코드 입력]
    G --> H{코드 유효?}
    H -->|예| I[학생 연결 완료]
    H -->|아니오| G
    I --> E
    
    B -->|예| J[메인 화면]
    E --> J
    
    J --> K[학생 상태 확인]
    K --> L[입실/퇴실 상태]
    K --> M[현재 학습 과목]
    K --> N[오늘 학습시간]
    K --> O[몰입도 점수]
    
    J --> P[스케줄 승인]
    P --> Q[승인 대기 목록]
    Q --> R{승인?}
    R -->|예| S[승인 처리]
    R -->|거부| T[거부 처리]
    
    J --> U[채팅]
    U --> V[채팅방 목록]
    V --> W[채팅 화면]
    W --> X[메시지 전송]
```

## 관리자 웹사이트 상세 플로우

```mermaid
flowchart TD
    A([관리자 진입])
    
    A --> B[로그인 화면]
    B --> C[로그인 처리]
    C --> D[대시보드]
    
    D --> E[학생 현황]
    E --> F[전체 학생 목록]
    F --> G[상태별 필터]
    F --> H[과목별 필터]
    F --> I[과목 직접 입력]
    I --> J[학생 선택]
    J --> K[과목 입력 모달]
    K --> L[저장]
```

## 관리자 - 몰입도 관리 플로우

```mermaid
flowchart TD
    A[몰입도 관리]
    
    A --> B[몰입도 입력]
    B --> C[학생 선택]
    C --> D[점수 선택]
    D --> E[저장]
    
    A --> F[몰입도 리포트]
    F --> G[학생별 리스트]
    G --> H[정렬 기능]
    H --> I[PDF 출력]
    H --> J[엑셀 다운로드]
```

## 관리자 - 상벌점 관리 플로우

```mermaid
flowchart TD
    A[상벌점 관리]
    
    A --> B[상벌점 현황]
    B --> C[학생별 목록]
    
    A --> D[수동 입력]
    D --> E[학생 선택]
    E --> F[상점/벌점 선택]
    F --> G[사유 입력]
    G --> H[점수 입력]
    H --> I[저장]
    
    A --> J[자동 부여 설정]
    J --> K[지각 벌점 규칙]
    J --> L[목표 달성 상점 규칙]
```

## 관리자 - 학부모 알림톡 플로우

```mermaid
flowchart TD
    A[학부모 알림 관리]
    
    A --> B[발송 현황]
    B --> C[발송 기록 목록]
    
    A --> D[자동 알림 설정]
    D --> E[지각 알림 설정]
    D --> F[결석 알림 설정]
    
    G{지각/결석 감지}
    G -->|예| H[카카오 알림톡 발송]
    H --> I[학부모 알림톡 수신]
```

## 관리자 - 데이터 다운로드 플로우

```mermaid
flowchart TD
    A[데이터 다운로드]
    
    A --> B[데이터 유형 선택]
    B --> C[학생 목록]
    B --> D[학습시간]
    B --> E[몰입도]
    B --> F[상벌점]
    
    C --> G[기간 선택]
    D --> G
    E --> G
    F --> G
    
    G --> H[다운로드 버튼]
    H --> I[엑셀 파일 생성]
    I --> J[다운로드]
```

## 3자 채팅 플로우

```mermaid
flowchart TD
    A([채팅 시작])
    
    A --> B{사용자 유형}
    
    B -->|학생| C[학생 채팅방 목록]
    B -->|학부모| D[학부모 채팅방 목록]
    B -->|관리자| E[관리자 채팅방 목록]
    
    C --> F[3자 채팅방 입장]
    D --> F
    E --> F
    
    F --> G[메시지 목록 표시]
    G --> H[메시지 입력]
    H --> I[전송]
    I --> J[실시간 업데이트]
    J --> G
```

## CAPS 연동 플로우

```mermaid
flowchart TD
    A[CAPS 시스템]
    
    A --> B{이벤트 발생}
    
    B -->|입실| C[입실 데이터 전송]
    B -->|퇴실| D[퇴실 데이터 전송]
    B -->|외출| E[외출 데이터 전송]
    
    C --> F[학생 상태 업데이트]
    D --> F
    E --> F
    
    F --> G[학습시간 계산]
    G --> H[대시보드 반영]
    
    F --> I{목표 시간 비교}
    I -->|지각| J[벌점 자동 부여]
    I -->|정상| K[상점 부여 체크]
    
    J --> L[학부모 알림톡 발송]
```
